<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MyGround < GenieGround</title>
        <link rel="stylesheet" href="../../assets/css/styles.css" />
  </head>

  <body>
    <div class="wrap">
      <header class="header">
        <a href="/src/main/index.html" class="logo">GenieGround</a>
        <div class="header-menu">
          <div class="gnb">
            <a href="/src/docs/index.html" class="gnb-menu">Docs</a>
            <a href="/src/demo/index.html" class="gnb-menu">Demo</a>
            <a href="/src/sampleCode/index.html" class="gnb-menu">Sample Code</a>
            <a href="/src/applications/index.html" class="gnb-menu">Applications</a>
            <a href="/src/forum/index.html" class="gnb-menu">Forum</a>
          </div>
          <div class="info">
            <a href="/src/myGround/index.html" class="info-menu ground is-active">MyGround</a>
            <!-- <a href="#login" class="info-menu login">Login</a> -->
            <a href="#logout" class="info-menu logout">Logout</a>
            <a href="#sign" class="info-menu sign">Sign Up</a>
          </div>
          <button type="button" id="gnbClose" class="btn-gnb close">
            메뉴닫기
          </button>
        </div>
        <button type="button" id="gnbOpen" class="btn-gnb open">
          메뉴열기
        </button>
      </header>
      <main class="container myGround">
        <nav class="breadcrumb">
          <a href="/src/main/index.html" class="breadcrumb-link">HOME</a>
          <a href="/src/myGround/index.html" class="breadcrumb-link">My Ground</a>
        </nav>
        <section class="container-header">
          <h1 class="page-title">My Ground</h1>
          <p class="page-txt">
            GenieGround 에서 내가 저장한 <br class="br-mo" />SampleCode를
            <br class="br-pc" />한눈에 확인하고 <br class="br-mo" />내가 만든
            어플리케이션을 <br />등록신청할 수 있는 공간입니다.
          </p>
        </section>
        <!--  -->
        <section class="container-content">
          <div class="tab-container">
            <div class="tab-header">
              <button type="button" class="tab-button is-active">
                Applications
              </button>
              <button type="button" class="tab-button">Sample code</button>
              <button type="button" class="tab-button">My Post</button>
            </div>
            <div class="tab-content">
              <article class="tab-item container-edit is-active">
                <header class="section-title">
                  <h5 class="title">내가 만든 Application 등록 신청​</h5>
                </header>
                <article class="form-container">
                  <header class="form-header">
                    <h5 class="title">필수정보</h5>
                  </header>
                  <form class="form">
                    <div class="form-item">
                      <div class="ipt-container category-box">
                        <div id="categorySelect" class="select-container">
                          <div class="select-box" data-selected=""></div>
                          <ul class="select-options"></ul>
                          <select class="select">
                            <option value="0" name="Voice API">
                              Voice API
                            </option>
                            <option value="1" name="NLP API">NLP API</option>
                            <option value="2" name="Vision API">
                              Vision API
                            </option>
                            <option value="3" name="Industry API">
                              Industry API
                            </option>
                            <option value="4" name="Network API">
                              Network API
                            </option>
                            <option value="5" name="기타">기타</option>
                          </select>
                        </div>
                        <div id="apiSelect" class="select-container select-api">
                          <div class="select-box" data-selected="0"></div>
                          <ul class="select-options"></ul>
                          <select class="select">
                            <option value="0" name="Genie Memo">
                              Genie Memo
                            </option>
                            <option value="1" name="API1 명">API1 명</option>
                            <option value="2" name="API2 명">API2 명</option>
                          </select>
                        </div>
                        <div class="btn-container">
                          <button type="button" class="btn addCategory">
                            추가
                          </button>
                        </div>
                      </div>
                      <p class="txt-notice mt20 mb20">Service 화면의 카드에는 상위 2개의 API 만 노출됩니다. ​</p>
                      <ul class="file-list api-list">
                        <li class="file-item api">
                          <div class="data">
                            <div class="description">
                              <span class="file-name">localhost_3000_ (1).png</span>
                            </div>
                            <div class="controls">
                              <button type="button" class="btn-txt del">
                                삭제하기
                              </button>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                    <div class="form-item">
                      <h5 class="form-item-title">Application 제목</h5>
                      <input type="text" class="ipt edit-ipt" placeholder="등록 될 application 제목을 입력하세요." />
                    </div>
                    <div class="form-item">
                      <h5 class="form-item-title">Application 요약</h5>
                      <textarea class="textarea" placeholder="Applications 메뉴 리스트에서 노출될 서비스 요약 내용을 입력하세요."></textarea>
                    </div>
                    <div class="form-item">
                      <dl class="thumbnail-box">
                        <dt>대표 이미지 또는 동영상</dt>
                        <dd class="ipt-container gap20">
                          <div class="rdo">
                            <input class="rdo-ipt" id="thumbImg" type="radio" name="thumbImg" checked />
                            <label for="thumbImg" class="rdo-label">이미지</label>
                          </div>
                          <div class="rdo">
                            <input class="rdo-ipt" id="thumbYoutube" type="radio" name="thumbImg" />
                            <label for="thumbYoutube" class="rdo-label">YouTube URL</label>
                          </div>
                        </dd>
                        <dd id="fileUpload" class="thumb-box is-show" data-thumb="thumbImg">
                          <input type="file" id="fileIpt" class="file-ipt" accept="image/*" />
                          <label for="fileIpt" class="file-label">파일첨부하기</label>
                          <figure class="thumb-img">
                            <div id="imgPreview"><img src="https://placehold.co/700x400/000/fff" alt="" /></div>
                            <button type="button" class="thumb-remove">삭제</button>
                          </figure>
                        </dd>
                        <dd class="thumb-box" data-thumb="thumbYoutube">
                          <input id="iptUrl" type="text" class="ipt" placeholder="URL을 입력해주세요​" />
                          <figure class="thumb-img">
                            <img src="https://placehold.co/700x400/000/fff" alt="" />
                            <button type="button" class="thumb-remove">삭제</button>
                          </figure>
                        </dd>
                      </dl>
                      <p class="txt-notice">
                        Application 상세 화면에서 제공할 대표 이미지 또는
                        YouTube 영상 URL 정보를 등록하세요​
                      </p>
                    </div>
                    <div class="form-item">
                      <h5 class="form-item-title">Application 설명</h5>
                      <textarea id="formEditor" name="editor1" class="edit-textarea" placeholder="application 관련 상세 설명 정보를 입력하세요."></textarea>
                      <p class="txt-notice">
                        Application 상세 화면에서 제공할 서비스 관련 정보를
                        등록하세요​
                      </p>
                    </div>
                    <div class="form-item">
                      <h5 class="form-item-title">Git 주소</h5>
                      <input type="text" class="ipt edit-ipt" placeholder="application 관련 GIT Hub 주소를 입력하세요​" />
                      <p class="txt-notice">
                        Application 상세 화면에서 제공할 GitHub 정보를
                        등록하세요​
                      </p>
                    </div>
                    <div class="form-item">
                      <dl class="title-content-box">
                        <dt>제공자정보</dt>
                        <dd class="ipt-container">
                          <div class="rdo">
                            <input class="rdo-ipt" id="user0" type="radio" name="user" value="0" checked />
                            <label for="user0" class="rdo-label">개인</label>
                          </div>
                          <div class="rdo">
                            <input class="rdo-ipt" id="user1" type="radio" name="user" value="1" />
                            <label for="user1" class="rdo-label">그룹</label>
                          </div>
                          <input type="text" class="ipt" placeholder="제공자 정보를 입력해주세요​" value="홍길동" readonly />
                        </dd>
                      </dl>
                      <p class="txt-notice">
                        제공자의 정보를 그룹(회사명 등) 또는 개인으로 선택하여
                        입력하세요. ​개인으로 선택 시 로그인 사용자의 이름으로
                        적용 됩니다.
                      </p>
                    </div>
                  </form>
                </article>
                <article class="form-container">
                  <header class="form-header">
                    <h5 class="title">선택정보</h5>
                  </header>
                  <form class="form">
                    <div class="form-item">
                      <h5 class="form-item-title">APK 다운로드 링크</h5>
                      <input type="text" class="ipt edit-ipt" placeholder="APK를 다운받을 수 있는 주소를 입력해 주세요.​" />
                      <p class="txt-notice">
                        APK 제공이 가능한 경우 입력하면 서비스 상세 화면에서
                        해당 링크를 통해 APK 다운로드를 제공합니다.
                      </p>
                    </div>
                    <div class="form-item">
                      <dl class="title-ipt-box">
                        <dt>관련서비스</dt>
                        <dd class="ipt-container">
                          <label class="ipt-tit">서비스 제목</label>
                          <input type="text" class="ipt" placeholder="제공자 정보를 입력해주세요​" />
                        </dd>
                        <dd class="ipt-container">
                          <label class="ipt-tit">링크 URL</label>
                          <input type="text" class="ipt" placeholder="제공자 정보를 입력해주세요​" />
                        </dd>
                      </dl>
                      <p class="txt-notice">
                        서비스 중인 제목 및 링크 주소를 입력하면 서비스 상세
                        화면에서 해당 링크를 제공합니다.
                      </p>
                    </div>
                  </form>
                  <div class="form-footer">
                    <div class="btn-container">
                      <button onclick="onClickBtn('cancel')" class="btn cancel">취소하기</button>
                      <button onclick="onClickBtn('mod')" class="btn">수정하기</button>
                      <button onclick="onClickBtn('regist')" class="btn">신청하기</button>
                    </div>
                  </div>
                </article>
              </article>
              <article class="tab-item">myGuide/index.html 파일 참조</article>
              <article class="tab-item">myGuide/index.html 파일 참조</article>
            </div>
          </div>
        </section>
      </main>
      <footer class="footer">
        <div class="copyright">
          <p class="copyright-txt">
            ㈜케이티 대표이사 구현모 사업자등록번호: 102-81-42945
          </p>
          <p class="copyright-txt">
            통신판매업신고: 2002-경기성남-0048 주소: 경기도 성남시 분당구 불정로
            90 (정자동)
          </p>
          <p class="copyright-txt">Copyright ⓒ KT Corp. All Rights Reserved.</p>
        </div>
        <div class="term">
          <a href="#none" class="term-txt">이용약관</a>
          <a href="#none" class="policy-txt">개인정보처리방침</a>
        </div>
      </footer>
    </div>
    <script src="https://cdn.ckeditor.com/4.19.1/standard/ckeditor.js"></script>
    <script src="../../assets/js/lib/jquery-1.9.1.js"></script>
    <script src="../../assets/js/lib/sweetalert2.min.js"></script>
    <script src="../../assets/js/lib/fileup.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script>
      // UI 관련 스크립트
      document.addEventListener("DOMContentLoaded", () => {
        evtApiItem();
        // 대표 이미지/동영상
        evtGetTypeThumbImg();
        // 썸네일 삭제하기
        document.querySelectorAll('.thumb-remove').forEach(btn => {
          btn.addEventListener('click', (e) => {
            initThumb()
          })
        })
        // Applications 설명
        CKEDITOR.config.width = `100%`        
        CKEDITOR.config.contentsCss = '/assets/css/lib/ckeditor-content.css';
        CKEDITOR.replace('editor1');
        // 제공자 정보
        evtChangeProvider()

      });
      // 사용 API : API 리스트 추가하기
      function evtApiItem() {
        const categoryBox = document.querySelector(".category-box");
        document
          .querySelector(".addCategory")
          .addEventListener("click", (e) => {
            const apiValue = categoryBox.querySelector("#apiSelect");
            console.log(apiValue.querySelector("select").selectedOptions[0]);
            const text =
              apiValue.querySelector("select").selectedOptions[0].label;
            if (text) {
              cloneApiList(text);
            }
          });
        const apiList = document.querySelector(".api-list");
        function cloneApiList(apiName) {
          const _li = document.createElement("li");
          _li.classList.add("file-item", "api");
          _li.innerHTML = `<div class="data">
                            <div class="description">
                              <span class="file-name">${apiName}</span>
                            </div>
                            <div class="controls">
                              <button type="button" class="btn-txt del">삭제하기</button>
                            </div>
                          </div>`;
          apiList.appendChild(_li);
        }
        // API 리스트 삭제하기
        apiList.addEventListener("click", (e) => {
          const _target = e.target;
          if (e.target.classList.contains("del")) {
            e.target.closest(".file-item").remove();
          }
        });
      }

      // 대표이미지,동영상 :  Youtube 썸네일 가져오기
      function evtGetTypeThumbImg() {
        // radio onChange Event
        document.querySelectorAll('[name="thumbImg"]').forEach((rdo) => {
          rdo.addEventListener("change", (e) => {
            if (e.target.checked) {
              // init
              initThumb()
              document.querySelectorAll(".thumb-box").forEach((thumb) => {
                thumb.classList.remove("is-show");
              });
              const id = e.target.getAttribute("id");
              document.querySelector(`[data-thumb="${id}"]`).classList.add("is-show");
            }
          });
        });

        // file upload lib
        $.fileup({
          url: "",
          inputID: "fileIpt",
          queueID: "imgPreview",
          templateFile: '<img src="[PREVIEW_SRC]" alt="[NAME]"/>',
          onSelect: function (file) {
            // thumb-img Tag
            document.querySelector('#fileUpload').querySelector('.thumb-img').removeAttribute('style')
          },

        });
        // Youtube URL
        const _iptUrl = document.querySelector("#iptUrl");
        _iptUrl.addEventListener("blur", (e) => {
          let url;
          if (e.target.value.includes('watch')) {
            url = e.target.value?.split("=");
            url = url[1]
          } else if (e.target.value.includes('youtu.be')) {
            url = e.target.value?.split('/')
            url = url[url.length - 1]
          }
          const thumb = `https://img.youtube.com/vi/${url}/mqdefault.jpg`;
          const _figure = e.target.nextElementSibling
          const _img = _figure.firstElementChild
          _img.setAttribute("src", thumb);
          _figure.removeAttribute('style')
        });
      }
      function initThumb() {
        document.querySelectorAll(".thumb-box").forEach((thumb) => {
          thumb.querySelector("input").value = "";
          thumb.querySelector("img")?.setAttribute("src", "");
          thumb.querySelector("img")?.setAttribute("alt", "");
          thumb.querySelector('.thumb-img').setAttribute('style', 'display: none')
        });
      }
      // 제공자 정보
      function evtChangeProvider() {
        const rdos = document.querySelectorAll('input[name="user"]')
        rdos.forEach(rdo => {
          const _ipt = rdo.closest('.ipt-container').querySelector('.ipt')
          rdo.addEventListener('change', (e) => {
            if (e.target.value === "0") {
              _ipt.value = '홍길동'
              _ipt.setAttribute('readonly', 'true')
            } else {
              _ipt.value = ''
              _ipt.removeAttribute('readonly')
            }
          })
        })
      }
      // 버튼
      function onClickBtn(type) {
        switch (type) {
          case 'cancel':
            // 취소
            confirmOpen('등록 신청을 취소하시겠습니까?', (result) => {
              if (result.value) {
                window.location.href = `/src/myGround/index.html`
              }
            })
            return
          case 'mod':
            // 수정
            confirmOpen('입력된 정보로 수정신청을 하시겠습니까?', (result) => {
              if (result.value) {
                alertOpen('수정이 완료되었습니다. 관리자 승인 후 Applications이 수정됩니다.', (alert) => {
                  window.location.href = `/src/myGround/index.html`
                })
              }
            })
            return
          case 'regist':
            // 신청
            confirmOpen('입력된 정보로 등록신청을 하시겠습니까?', (result) => {
              if (result.value) {
                alertOpen('등록이 완료되었습니다. 관리자 승인 후 Applications이 등록됩니다.', (alert) => {
                  window.location.href = `/src/myGround/index.html`
                })
              }
            })
            return
          default:
            return
        }
      }
    </script>
  </body>

</html>
